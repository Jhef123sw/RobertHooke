{% extends base_template %}

{% block content %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'login/ver_asistencias.css' %}">
<style>
    .tabla-asistencias {
        max-height: 500px; /* Altura máxima visible */
        overflow-y: auto;  /* Scroll vertical si hay muchas filas */
        overflow-x: auto;  /* Scroll horizontal si la tabla es muy ancha */
        border: 1px solid #ccc;
        border-radius: 8px;
    }
    .filtro-form {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .filtro-form input[type="date"] {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #020000;
        }

        .filtro-form button {
            padding: 8px 12px;
            border-radius: 5px;
            border: none;
            background-color: #007bff;
            color: white;
            cursor: pointer;
        }

        .filtro-form button:hover {
            background-color: #0056b3;
        }
</style>
<div class="contenedor-asistencias">
    <h2>Mis Asistencias</h2>
    <form method="get" class="filtro-form">
        <label for="fecha" style="color: #020000;">Buscar por fecha:</label>
        <input type="date" name="fecha" id="fecha" value="{{ fecha_filtrada }}">
        <button type="submit">Filtrar</button>
        {% if fecha_filtrada %}
            <a href="{% url 'ver_asistencias' %}" style="margin-left:10px;">Limpiar filtro</a>
        {% endif %}
    </form>
    <div class="tabla-asistencias">
        <table>
            <thead>
                <tr>
                    <th>Cod.</th>
                    <th>Nombre y Apellidos</th>
                    <th>Fecha</th>
                    <th>Fecha Corta</th>
                    <th>Nro</th>
                    <th>Marcación</th>
                    <th>Modalidad</th>
                    <th>Observación</th>
                </tr>
            </thead>
            <tbody>
                {% for a in asistencias %}
                    <tr>
                        <td style="color: black;">{{ a.usuario }}</td>
                        <td style="color: black;">{{ a.nombre }}</td>
                        <td style="color: black;">{{ a.fecha }}</td>
                        <td style="color: black;">{{ a.fecha_corta }}</td>
                        <td style="color: black;">{{ a.numero_marca }}</td>
                        <td style="color: black;">{{ a.hora }}</td>
                        <td style="color: black;">{{ a.modalidad }}</td>
                        <td style="color: black;">{{ a.observacion }}</td>
                    </tr>
                {% empty %}
                    <tr><td colspan="7">No tienes asistencias registradas.</td></tr>
                {% endfor %}
            </tbody>
        </table>

        <p style="color: brown;">(*) El sistema controla la asistencia de alumnos presenciales (huella digital) y virtuales (que ingresaron a través del formulario)
Cualquier consulta puede llamar al 939824522</p>
    </div>
</div>
{% endblock %}
